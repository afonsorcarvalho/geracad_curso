<odoo>
  <data>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="geracad_curso_turma_disciplina_list">
      <field name="name">cursos.turma.disciplina.list</field>
      <field name="model">geracad.curso.turma.disciplina</field>
      <field name="arch" type="xml">
        <tree>
          <field name="id" optional="show"/>
          <field name="name" string="Nome" />
          <field name="disciplina_id"/>
          <field name="curso_turma_id" optional="show"/>
          <field name="matricula_aberta" optional="show"/>
          <field name="professor_id" optional="show" context="{'default_e_professor': 1}"/>
          <field name="data_abertura" optional="show"/>
          <field name="data_inicio" optional="show"/>
          <field name="data_previsao_termino" optional="show"/>
          <field name="data_encerramento" optional="show"/>
          <field name="state" 
          widget="badge"
           optional="show"/>
          
     
     

        </tree>
    
      </field>
    </record>

    <record model="ir.ui.view" id="geracad_curso_turma_disciplina_form_view">
      <field name="name">geracad.curso.turma.disciplina.form</field>
      <field name="model">geracad.curso.turma.disciplina</field>
      <field name="arch" type="xml">
          <form string="Disciplina">
            <header>
            
              <button name="action_encerrar_matricula" string="Encerrar" class="oe_highlight" states="aberta" type="object"
                  special="cancel"
                  confirm="Tem certeza que deseja encerrar matriculas nessa turma? Esta ação não poderá ser defeita"
              />
              <button name="action_cancelar_matricula" string="Cancelar"  states="aberta" type="object"
                  special="cancel"
                  confirm="Tem certeza que deseja cancelar essa turma? Esta ação não poderá ser defeita"
              />
              <button name="action_suspender_matricula" string="Suspender" states="aberta" type="object"/>
              <button name="action_abrir_matricula" string="Abrir" states="suspensa" type="object"/>
              <field name="state" widget="statusbar" statusbar_visible="aberta, encerrada"/>
            </header>
            <sheet>
              <div class="oe_button_box" name="button_box">
                <button name="action_go_alunos_disciplinas" type="object" class="oe_stat_button" icon="fa-file-text-o"
                    >
                    <div class="o_field_widget o_stat_info">
                     
                      <field name="alunos_count" class="o_state_value" />
                      <span class="o_stat_text">Alunos</span>
                    </div>
                </button>
                <button name="action_go_notas_disciplinas" type="object" class="oe_stat_button" icon="fa-file-text-o"
                    >
                    <div class="o_field_widget o_stat_info">
                     
                   
                      <span class="o_stat_text">Notas</span>
                    </div>
                </button>
              
              </div>

              <h1>
              <field name="display_name" readonly="1"/>
              </h1>
              <group >
                <group  string="Turma Disciplina">
                  
                  
                  
                  <field name="curso_turma_id" options="{'no_create': True }" 
                  attrs="{'readonly' : [('state','!=', 'draft')]  }"
                   />
                  <field name="disciplina_id" options="{'no_create': True}"
                  attrs="{'readonly' : [('state','!=', 'draft')]  }"
                  />
                 
                  <field name="professor_id" options="{'no_create': True}"/>
                  <field name="vagas"/>
                  <field name="sala_id" options="{'no_create': True}"/>
                </group>
                <group string="Datas e Status">
                  <field name="data_abertura" 
                  attrs="{'readonly' : [('state','!=', 'draft')]  }"
                  />
                  <field name="data_inicio" />
                  <field name="data_previsao_termino" />
                  <field name="data_encerramento" />
               
                </group>
              </group>    
              <group>
                <group string="Outras informações">
                  <field name="matricula_aberta"  attrs="{'readonly' : [('state','!=', 'draft')]  }"/>
                  <field name="e_pendencia"  attrs="{'readonly' : [('state','!=', 'draft')]  }" />
                  <field name="e_aproveitamento"  attrs="{'readonly' : [('state','!=', 'draft')]  }" />
                  <field name="company_id" string="Unidade" options="{'no_create': True}"  attrs="{'readonly' : [('state','!=', 'draft')]  }"/>

                </group>
              </group>     
              <notebook>
                <page string="Notas">
                  <group>
                    <field name="notas" nolabel="1" readonly="1">
                      <tree  editable="0" delete="0" create="0">
                        <field name="disciplina_matricula_id"/>
                        <field name="nota_1"/>
                        <field name="nota_2"/>
                        <field name="final"/>
                        <field name="media"/>
                        <field name="situation" string="Situação"/>
                      </tree>

                    </field>
                  </group>
                </page>
              </notebook>  
            </sheet>
            <div class="oe_chatter">
              <field name="message_follower_ids" widget="mail_followers"/>
              <field name="message_ids" widget="mail_thread"/>
          </div>
          </form>
      </field>
    </record>


    <record id="geracad_curso_turma_disciplina_search" model="ir.ui.view">
      <field name="name">geracad.curso.turma.disciplina.search</field>
      <field name="model">geracad.curso.turma.disciplina</field>
      <field name="arch" type="xml">
        <search string="Procura Disciplina">
          <field name="name"/>
          <field name="curso_turma_id" />
          <field name="matricula_aberta" />
          <field name="professor_id"/>
          <field name="vagas"/>
          <field name="sala_id"/>
          <field name="e_pendencia" />
          <field name="e_aproveitamento" />
         
         
      </search>
      </field>
    </record>

    <record model="ir.actions.act_window" id="geracad_curso_turma_disciplina_action_window">
      <field name="name">Turma de Disciplina</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">geracad.curso.turma.disciplina</field>
      <field name="view_mode">tree,form</field>
   
      <field name="search_view_id" ref="geracad_curso_turma_disciplina_search"/>
    
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
          Crie um nova Turma de Disciplina
        </p>
      </field>
    </record>

    <!-- actions opening views on models -->
    <record id="action_geracad_curso_turma_disciplina_form_view" model="ir.actions.act_window.view">
      <field eval="11" name="sequence"/>
      <field name="view_mode">form</field>
      <field name="view_id" ref="geracad_curso_turma_disciplina_form_view"/>
      <field name="act_window_id" ref="geracad_curso_turma_disciplina_action_window"/>
      
    </record>
    <record id="action_geracad_cursos_turma_disciplina_tree_view" model="ir.actions.act_window.view">
      <field eval="10" name="sequence"/>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="geracad_curso_turma_disciplina_list"/>
      <field name="act_window_id" ref="geracad_curso_turma_disciplina_action_window"/>
    </record>

    

    <!-- menu categories -->

    <!-- <menuitem name="Disciplina" id="geracad_curso.menu_disciplina_1" parent="geracad_curso.menu_root"/>
    <menuitem name="Disciplina 2" id="geracad_curso.menu_disciplina_2" parent="geracad_curso.menu_root"/> -->

    <!-- actions -->

   
    <!-- <menuitem name="Em Disciplina" id="geracad_curso.menu_disciplina_2_list" parent="geracad_curso.menu_disciplina_1"
              action="geracad_curso_disciplina_action_window"/> -->
    <!-- <menuitem name="Server to list" id="geracad_aluno" parent="geracad_aluno.menu_2"
              action="geracad_aluno.action_server"/> -->

  </data>
</odoo>